<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Command Line Parser: dynamic.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Command Line Parser
   </div>
   <div id="projectbrief">A simple command line parser defined at compile time for C++23/26</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dynamic_8hpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#concepts">Concepts</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">dynamic.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;memory&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &lt;cstddef&gt;</code><br />
<code>#include &quot;<a class="el" href="functional_8hpp_source.html">functional.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="type_8hpp_source.html">type.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="meta_8hpp_source.html">meta.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="self_8hpp_source.html">self.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="integer_8hpp_source.html">integer.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="swap_8hpp_source.html">swap.hpp</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for dynamic.hpp:</div>
<div class="dyncontent">
<div class="center"><img src="dynamic_8hpp__incl.png" border="0" usemap="#adynamic_8hpp" alt=""/></div>
<map name="adynamic_8hpp" id="adynamic_8hpp">
<area shape="rect" title=" " alt="" coords="1277,5,1372,32"/>
<area shape="rect" title=" " alt="" coords="5,80,73,107"/>
<area shape="rect" title=" " alt="" coords="945,453,997,480"/>
<area shape="rect" title=" " alt="" coords="129,453,195,480"/>
<area shape="rect" href="functional_8hpp.html" title=" " alt="" coords="1392,229,1495,256"/>
<area shape="rect" href="type_8hpp.html" title=" " alt="" coords="989,304,1060,331"/>
<area shape="rect" href="meta_8hpp.html" title=" " alt="" coords="1186,379,1261,405"/>
<area shape="rect" href="self_8hpp.html" title=" " alt="" coords="1667,304,1734,331"/>
<area shape="rect" href="integer_8hpp.html" title=" " alt="" coords="739,80,825,107"/>
<area shape="rect" href="swap_8hpp.html" title=" " alt="" coords="1718,80,1795,107"/>
<area shape="rect" title=" " alt="" coords="1302,453,1353,480"/>
<area shape="rect" title=" " alt="" coords="1379,453,1462,480"/>
<area shape="rect" title=" " alt="" coords="570,379,623,405"/>
<area shape="rect" href="bitmask_8hpp.html" title=" " alt="" coords="968,379,1060,405"/>
<area shape="rect" title=" " alt="" coords="1193,453,1254,480"/>
<area shape="rect" href="stateful__meta_8hpp.html" title=" " alt="" coords="1437,379,1562,405"/>
<area shape="rect" title=" " alt="" coords="402,155,477,181"/>
<area shape="rect" title=" " alt="" coords="501,155,569,181"/>
<area shape="rect" title=" " alt="" coords="593,155,672,181"/>
<area shape="rect" title=" " alt="" coords="697,155,782,181"/>
<area shape="rect" title=" " alt="" coords="807,155,845,181"/>
<area shape="rect" title=" " alt="" coords="869,155,935,181"/>
<area shape="rect" title=" " alt="" coords="959,155,1029,181"/>
<area shape="rect" title=" " alt="" coords="1053,155,1111,181"/>
<area shape="rect" href="operators_8hpp.html" title=" " alt="" coords="1187,155,1287,181"/>
<area shape="rect" title=" " alt="" coords="1187,229,1265,256"/>
</map>
</div>
</div>
<p><a href="dynamic_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1basic__obj__ptr.html">utils::basic_obj_ptr&lt; Q &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1detail_1_1dyn__method__base.html">utils::detail::dyn_method_base&lt; R, Args &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1dyn__method_3_01R_07Args_8_8_8_08_4.html">utils::dyn_method&lt; R(Args...)&gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1dyn__method_3_01R_07ObjPtr_00_01Args_8_8_8_08_4.html">utils::dyn_method&lt; R(ObjPtr, Args...)&gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1has__implemented.html">utils::has_implemented&lt; I, T &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1detail_1_1bound__dyn__method.html">utils::detail::bound_dyn_method&lt; R, ObjPtr, Args &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutils_1_1fptr.html">utils::fptr&lt; T &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1ivtable.html">utils::ivtable&lt; I &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1vtable.html">utils::vtable&lt; Is &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1deleter.html">utils::deleter&lt; T &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1default__deleter.html">utils::default_deleter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1default__array__deleter.html">utils::default_array_deleter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1disabled__deleter.html">utils::disabled_deleter</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1detail_1_1ivtable__pointers.html">utils::detail::ivtable_pointers&lt; Is &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structutils_1_1detail_1_1ivtable__pointers_3_01std_1_1tuple_3_01Is_8_8_8_01_4_01_4.html">utils::detail::ivtable_pointers&lt; std::tuple&lt; Is... &gt; &gt;</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="namespaces" name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceutils"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html">utils</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:namespaceutils_1_1detail"><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils_1_1detail.html">utils::detail</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="concepts" name="concepts"></a>
Concepts</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">concept &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="conceptutils_1_1interface.html">utils::interface</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">concept &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="conceptutils_1_1implemented.html">utils::implemented</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">concept &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="conceptutils_1_1detail_1_1dptr__compatible.html">utils::detail::dptr_compatible</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a715ab85251d4469384bbbfa91eaa3214"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dynamic_8hpp.html#a715ab85251d4469384bbbfa91eaa3214">UTILS_DYN_NO_ARR_ERR_MSG</a>&#160;&#160;&#160;&quot;array support for dptr disabled [UTILS_DYN_NO_ARR]&quot;</td></tr>
<tr class="separator:a715ab85251d4469384bbbfa91eaa3214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ea298754f78cee61561d73527480ba0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dynamic_8hpp.html#a4ea298754f78cee61561d73527480ba0">UTILS_DYN</a></td></tr>
<tr class="separator:a4ea298754f78cee61561d73527480ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c1bb59a2913f7e47ebd09366c0dd01d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dynamic_8hpp.html#a5c1bb59a2913f7e47ebd09366c0dd01d">UTILS_DYN_END</a></td></tr>
<tr class="separator:a5c1bb59a2913f7e47ebd09366c0dd01d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:afa440d1c54e03f9cc1f73e84b81805fc"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#afa440d1c54e03f9cc1f73e84b81805fc">utils::obj_ptr</a> = basic_obj_ptr&lt; type_qualifiers::none &gt;</td></tr>
<tr class="separator:afa440d1c54e03f9cc1f73e84b81805fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60dc5e6aa6ebccef881e7b4f1f91b240"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a60dc5e6aa6ebccef881e7b4f1f91b240">utils::const_obj_ptr</a> = basic_obj_ptr&lt; type_qualifiers::c &gt;</td></tr>
<tr class="separator:a60dc5e6aa6ebccef881e7b4f1f91b240"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabaabe0b229ba55fbe2d73ac6bf64432"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#aabaabe0b229ba55fbe2d73ac6bf64432">utils::volatile_obj_ptr</a> = basic_obj_ptr&lt; type_qualifiers::v &gt;</td></tr>
<tr class="separator:aabaabe0b229ba55fbe2d73ac6bf64432"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79873e218d3cf56d71971ff38ebaecf0"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a79873e218d3cf56d71971ff38ebaecf0">utils::const_volatile_obj_ptr</a> = basic_obj_ptr&lt; type_qualifiers::c|type_qualifiers::v &gt;</td></tr>
<tr class="separator:a79873e218d3cf56d71971ff38ebaecf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a85d06b0b2262f1a3d0346f09543fcc3c"><td class="memTemplParams" colspan="2">template&lt;typename T , typename F  = lambda_decay_t&lt;T&gt;&gt; </td></tr>
<tr class="memitem:a85d06b0b2262f1a3d0346f09543fcc3c"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a85d06b0b2262f1a3d0346f09543fcc3c">utils::dyn_method</a> (T) -&gt; dyn_method&lt; F &gt;</td></tr>
<tr class="separator:a85d06b0b2262f1a3d0346f09543fcc3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66bf5dca54090e03e34143ec32708cd4"><td class="memTemplParams" colspan="2">template&lt;typename Dyn &gt; </td></tr>
<tr class="memitem:a66bf5dca54090e03e34143ec32708cd4"><td class="memTemplItemLeft" align="right" valign="top">constexpr decltype(auto)&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceutils_1_1detail.html#a66bf5dca54090e03e34143ec32708cd4">utils::detail::bind_dyn</a> (auto optr, const Dyn &amp;dyn) noexcept</td></tr>
<tr class="separator:a66bf5dca54090e03e34143ec32708cd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a8bcc0727300b0c1d01476c0b29dd9b9c"><td class="memTemplParams" colspan="2">template&lt;typename I , typename T &gt; </td></tr>
<tr class="memitem:a8bcc0727300b0c1d01476c0b29dd9b9c"><td class="memTemplItemLeft" align="right" valign="top">constexpr bool&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespaceutils.html#a8bcc0727300b0c1d01476c0b29dd9b9c">utils::has_implemented_v</a> = has_implemented&lt;I, T&gt;::value</td></tr>
<tr class="separator:a8bcc0727300b0c1d01476c0b29dd9b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This file provides utilities for Rust-like dynamic dispatch, as a partial replacement for virtual methods in standard C++. The major difference between this system and that in the language is that rather than embedding a pointer to vtable in each object, it is stored in each pointer to an object. The advantages of this approach are that it reduces the footprint of "dynamic objects" and one level of indirection on each dynamic dispatch.</p>
<p >Important concepts and remarks:</p><ul>
<li>An <b>Interface</b> is any class type that defines what its <b>implementers</b> must implement. Under the hood, the interface is directly embedded in its associated vtables, and so there are few limits on what the class type can be. However, practically, you would probably want an interface to be an aggregate for the provided macros to be usable.</li>
<li>When a class <code>T</code> implements one or more interfaces (by using the UTILS_DYN_BEGIN and UTILS_DYN_END macros), you are defining a static method <code>vtable()</code> that returns a <code>vtable</code> object stored in static duration storage. The <code>vtable</code> struct inherits from <code>ivtable&lt;I&gt;</code> for each <code>I</code> in <code>Is</code>, which in turn is a struct that inherits from <code>I</code> and contains an extra <code>dtor</code>. The macro and the constructor of <code>vtable</code> automatically initializes the <code>dtor</code> fields with the destructor of <code>T</code>, the <code>size</code> fields with <code>sizeof(T)</code>, and the <code>arr_deleter</code> fields with <code>delete T[]</code>. An <code>fptr</code> or <code>dptr</code> stores a type-erased pointer and extra pointer(s) to appropriate <code>ivtable</code>s, which is how they know which methods and destructors to call.</li>
<li><b>Strongly</b> prefer composition over inheritance. Dynamic pointers (<code>dptr</code>s) only care about what interfaces a class implements, but not the inheritance structure between interfaces. As an example: <div class="fragment"><div class="line"><span class="keyword">struct </span>Animal { <span class="comment">// interface</span></div>
<div class="line">    <a class="code hl_function" href="namespaceutils.html#a85d06b0b2262f1a3d0346f09543fcc3c">dyn_method</a>&lt;void(<a class="code hl_typedef" href="namespaceutils.html#afa440d1c54e03f9cc1f73e84b81805fc">obj_ptr</a>)&gt; eats;</div>
<div class="line">};</div>
<div class="line"><span class="keyword">struct </span>SeaAnimal : Animal { <span class="comment">// bad interface!</span></div>
<div class="line">    <a class="code hl_function" href="namespaceutils.html#a85d06b0b2262f1a3d0346f09543fcc3c">dyn_method</a>&lt;void(<a class="code hl_typedef" href="namespaceutils.html#afa440d1c54e03f9cc1f73e84b81805fc">obj_ptr</a>)&gt; swims;</div>
<div class="line">};</div>
<div class="line"><span class="keyword">class </span>Fish : <span class="keyword">public</span> implements&lt;SeaAnimal&gt; {...};</div>
<div class="line">unique_dptr&lt;SeaAnimal&gt; animal1 = <span class="keyword">new</span> Fish; <span class="comment">// ok</span></div>
<div class="line">unique_dptr&lt;Animal&gt; animal2 = <span class="keyword">new</span> Fish; <span class="comment">// ill-formed: Fish does not implement Animal!</span></div>
<div class="ttc" id="anamespaceutils_html_a85d06b0b2262f1a3d0346f09543fcc3c"><div class="ttname"><a href="namespaceutils.html#a85d06b0b2262f1a3d0346f09543fcc3c">utils::dyn_method</a></div><div class="ttdeci">dyn_method(T) -&gt; dyn_method&lt; F &gt;</div></div>
<div class="ttc" id="anamespaceutils_html_afa440d1c54e03f9cc1f73e84b81805fc"><div class="ttname"><a href="namespaceutils.html#afa440d1c54e03f9cc1f73e84b81805fc">utils::obj_ptr</a></div><div class="ttdeci">basic_obj_ptr&lt; type_qualifiers::none &gt; obj_ptr</div><div class="ttdef"><b>Definition:</b> <a href="dynamic_8hpp_source.html#l00090">dynamic.hpp:90</a></div></div>
</div><!-- fragment --> Instead, you should do this: <div class="fragment"><div class="line"><span class="keyword">struct </span>Animal { <span class="comment">// interface</span></div>
<div class="line">    <a class="code hl_function" href="namespaceutils.html#a85d06b0b2262f1a3d0346f09543fcc3c">dyn_method</a>&lt;void(<a class="code hl_typedef" href="namespaceutils.html#afa440d1c54e03f9cc1f73e84b81805fc">obj_ptr</a>)&gt; eats;</div>
<div class="line">};</div>
<div class="line"><span class="keyword">struct </span>SeaAnimal { <span class="comment">// good interface</span></div>
<div class="line">    <a class="code hl_function" href="namespaceutils.html#a85d06b0b2262f1a3d0346f09543fcc3c">dyn_method</a>&lt;void(<a class="code hl_typedef" href="namespaceutils.html#afa440d1c54e03f9cc1f73e84b81805fc">obj_ptr</a>)&gt; swims;</div>
<div class="line">};</div>
<div class="line"><span class="keyword">class </span>Fish : <span class="keyword">public</span> implements&lt;Animal, SeaAnimal&gt; {...};</div>
<div class="line">unique_dptr&lt;SeaAnimal&gt; animal1 = <span class="keyword">new</span> Fish; <span class="comment">// ok</span></div>
<div class="line">unique_dptr&lt;Animal, SeaAnimal&gt; animal2 = <span class="keyword">new</span> Fish; <span class="comment">// still ok</span></div>
<div class="line">unique_dptr&lt;Animal animal3 = <span class="keyword">new</span> Fish; <span class="comment">// still ok</span></div>
</div><!-- fragment --></li>
</ul>
<p >Functionality toggle macros:</p><ul>
<li>UTILS_DYN_NO_ARR: Disables array support in <code>dptr</code> if present. Reduces the size of each <code>ivtable</code> by <code>sizeof(size_t) + sizeof(void*)</code>. </li>
</ul>

<p class="definition">Definition in file <a class="el" href="dynamic_8hpp_source.html">dynamic.hpp</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4ea298754f78cee61561d73527480ba0" name="a4ea298754f78cee61561d73527480ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ea298754f78cee61561d73527480ba0">&#9670;&nbsp;</a></span>UTILS_DYN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UTILS_DYN</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">    UTILS_FIND_SELF\</div>
<div class="line">    constexpr <span class="keyword">static</span> <span class="keyword">const</span> vtable_type&amp; vtable() {\</div>
<div class="line">        static <span class="keyword">constexpr</span> vtable_type vtable(</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c1bb59a2913f7e47ebd09366c0dd01d" name="a5c1bb59a2913f7e47ebd09366c0dd01d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c1bb59a2913f7e47ebd09366c0dd01d">&#9670;&nbsp;</a></span>UTILS_DYN_END</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UTILS_DYN_END</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">            ,\</div>
<div class="line">            [](<span class="keywordtype">void</span>* ptr) { std::destroy_at(<span class="keyword">static_cast&lt;</span><a class="code hl_define" href="self_8hpp.html#a379c3395d69445241a0099fdaf0e68de">UTILS_FIND_SELF_TYPE</a>*<span class="keyword">&gt;</span>(ptr)); },\</div>
<div class="line">            sizeof(<a class="code hl_define" href="self_8hpp.html#a379c3395d69445241a0099fdaf0e68de">UTILS_FIND_SELF_TYPE</a>),\</div>
<div class="line">            [](<span class="keywordtype">void</span>* arr) { <span class="keyword">delete</span>[] <span class="keyword">static_cast&lt;</span><a class="code hl_define" href="self_8hpp.html#a379c3395d69445241a0099fdaf0e68de">UTILS_FIND_SELF_TYPE</a>*<span class="keyword">&gt;</span>(arr);}\</div>
<div class="line">        );\</div>
<div class="line">        return vtable;\</div>
<div class="line">    }</div>
<div class="ttc" id="aself_8hpp_html_a379c3395d69445241a0099fdaf0e68de"><div class="ttname"><a href="self_8hpp.html#a379c3395d69445241a0099fdaf0e68de">UTILS_FIND_SELF_TYPE</a></div><div class="ttdeci">#define UTILS_FIND_SELF_TYPE</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a715ab85251d4469384bbbfa91eaa3214" name="a715ab85251d4469384bbbfa91eaa3214"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a715ab85251d4469384bbbfa91eaa3214">&#9670;&nbsp;</a></span>UTILS_DYN_NO_ARR_ERR_MSG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UTILS_DYN_NO_ARR_ERR_MSG&#160;&#160;&#160;&quot;array support for dptr disabled [UTILS_DYN_NO_ARR]&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dynamic_8hpp_source.html#l00071">71</a> of file <a class="el" href="dynamic_8hpp_source.html">dynamic.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dynamic_8hpp.html">dynamic.hpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
